<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Hunt the Wumpus</title>
  <link href="https://fonts.googleapis.com/css2?family=UnifrakturCook:wght@700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: Georgia, serif;
      background-color: #f5f1e6;
      padding: 2em;
      max-width: 650px;
      margin: auto;
    }
    h1 {
      font-family: 'UnifrakturCook', cursive;
      font-size: 3em;
      margin-bottom: 0.2em;
    }
    #game {
      white-space: pre-wrap;
      background: #fff;
      border: 1px solid #ccc;
      padding: 1em;
      margin-top: 1em;
      min-height: 120px;
    }
    input, button {
      font-size: 1em;
      padding: 0.4em;
      margin-top: 0.5em;
    }
    #start-screen {
  text-align: left;
  margin-top: 10px;
}
#start-screen button {
  font-size: 1.2em;
  padding: 0.6em 1.2em;
  cursor: pointer;
}

    .blinking-cursor {
  display: inline-block;
  animation: blink 1s step-start infinite;
}

@keyframes blink {
  50% { opacity: 0; }
}

  </style>
</head>
<body>
  <h1>Hunt the Wumpus</h1>

   <p><strong>The Wumpus</strong> is a subterranean beast as majestic as it is elusive; as furry as it is ferocious. </p>
  
  <strong>Rules:</strong> You are in a cave with 20 chambers, connected by tunnels. The Wumpus is hiding in one of the chambers. Each turn, you can either:</p>
  <ul>
    <li><strong>Go</strong> to a connected chamber</li>
    <li><strong>Shoot</strong> an arrow into a connected chamber</li>
  </ul>
  <p>If you enter the Wumpus’s chamber, you get eaten. If you shoot into the Wumpus’s chamber, you win. If you smell the Wumpus nearby, shoot an arrow before it's too late!</p>
  <p><em>Enter a chamber number, then click "Go" or "Shoot" to fire an arrow.</em></p>
  
<div id="start-screen">
  <button onclick="startGame()">Play</button>
</div>

  
  <pre id="game"></pre>

  <div style="margin-top: 1em;">
    <input type="text" id="input" placeholder="Enter chamber number..." />
    <button onclick="makeMove()">Go</button>
    <button onclick="shootArrow()">Shoot</button>
    <button id="restart" onclick="restartGame()" style="display:none;">Restart Game</button>
  </div>

  <script>
  const map = {
    1: [2, 5, 8],   2: [1, 3, 10],  3: [2, 4, 12],  4: [3, 5, 14],  5: [1, 4, 6],
    6: [5, 7, 15],  7: [6, 8, 17],  8: [1, 7, 9],   9: [8, 10, 18], 10: [2, 9, 11],
    11: [10, 12, 19], 12: [3, 11, 13], 13: [12, 14, 20], 14: [4, 13, 15],
    15: [6, 14, 16], 16: [15, 17, 20], 17: [7, 16, 18], 18: [9, 17, 19],
    19: [11, 18, 20], 20: [13, 16, 19]
  };

  let player = 1;
  let wumpus = Math.floor(Math.random() * 20) + 1;

  function describeRoom() {
    const output = [
      `You are in room ${player}.`,
      `Tunnels stretch out toward chambers ${map[player].join(', ')}.`
    ];
    if (map[player].includes(wumpus)) {
      output.push("A foul stench creeps through the stone... the Wumpus is near.");
    }
    document.getElementById("game").innerText = output.join('\n');
  }

  function makeMove() {
    const inputValue = document.getElementById("input").value.trim();
    const move = parseInt(inputValue);
    const validMoves = map[player];

    if (isNaN(move)) {
      document.getElementById("game").innerText = "The cave echoes back your nonsense. Try a valid room number.";
      document.getElementById("input").value = '';
      return;
    }

    if (validMoves.includes(move)) {
      player = move;
      if (player === wumpus) {
        document.getElementById("game").innerText = "You step into the darkness... glowing eyes blink. A scream echoes. You were devoured by the Wumpus!";
        document.getElementById("restart").style.display = 'inline';
      } else {
        describeRoom();
      }
    } else {
      const output = [
        `A stone wall blocks your path. You can't go to room ${move}.`,
        `You remain in room ${player}.`,
        `Tunnels lead to: ${validMoves.join(', ')}.`
      ];
      document.getElementById("game").innerText = output.join('\n');
    }

    document.getElementById("input").value = '';
  }

  function shootArrow() {
    const inputValue = document.getElementById("input").value.trim();
    const targetRoom = parseInt(inputValue);

    if (isNaN(targetRoom)) {
      document.getElementById("game").innerText = "Your hand trembles. Aim at a real room, adventurer.";
      document.getElementById("input").value = '';
      return;
    }

    if (map[player].includes(targetRoom)) {
      if (targetRoom === wumpus) {
        document.getElementById("game").innerText = "Your arrow whistles through the air and strikes true! The Wumpus shrieks and collapses. You are victorious!";
        document.getElementById("restart").style.display = 'inline';
      } else {
        const output = [
          "The arrow clatters in the dark... nothing stirs. The Wumpus lives.",
          "",
          `You are in chamber ${player}.`,
          `Tunnels lead to ${map[player].join(', ')}.`
        ];
        if (map[player].includes(wumpus)) {
          output.push("A foul stench creeps through the stone... the Wumpus is near.");
        }
        document.getElementById("game").innerText = output.join('\n');
      }
    } else {
      const output = [
        `Your shot ricochets off stone. You can't shoot into chamber ${targetRoom}.`,
        `From room ${player}, your bow can only reach: ${map[player].join(', ')}.`
      ];
      document.getElementById("game").innerText = output.join('\n');
    }

    document.getElementById("input").value = '';
  }

  function restartGame() {
    player = 1;
    wumpus = Math.floor(Math.random() * 20) + 1;
    document.getElementById("restart").style.display = 'none';
    describeRoom();
  }

  function typeWriter(text, i, callback) {
    if (i < text.length) {
      document.getElementById("game").innerText = text.substring(0, i + 1);
      setTimeout(() => typeWriter(text, i + 1, callback), 40);
    } else if (typeof callback === 'function') {
      callback();
    }
  }

  function startGame() {
  document.getElementById("start-screen").style.display = "none";
  typeWriter(introText, 0, () => {
    // After typewriter finishes, show prompt and wait for Enter
    const prompt = document.createElement("p");
    prompt.id = "continue-prompt";
    prompt.innerHTML = 'Press Enter to continue<span class="blinking-cursor">_</span>';
    document.getElementById("game").appendChild(prompt);

    document.addEventListener("keydown", waitForEnter);
  });
}

    function waitForEnter(e) {
  if (e.key === "Enter") {
    document.removeEventListener("keydown", waitForEnter);
    const prompt = document.getElementById("continue-prompt");
    if (prompt) prompt.remove();
    describeRoom();
  }
}


  const introText = "You awaken in a cold, dripping cave. A voice echoes in your mind:\n*Hunt the Wumpus... or be hunted.*\n\n";
</script>

</body>
</html>
